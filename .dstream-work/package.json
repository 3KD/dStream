{
  "name": "dstream-rebuild",
  "version": "0.0.0",
  "private": true,
  "workspaces": [
    "apps/*",
    "packages/*"
  ],
  "scripts": {
    "dev": "turbo run dev",
    "build": "turbo run build",
    "lint": "turbo run lint",
    "typecheck": "turbo run typecheck",
    "test:protocol": "node --test --import tsx packages/protocol/src/protocol.test.ts",
    "test:monero": "node --test --import tsx apps/web/src/lib/monero/monero.test.ts",
    "test:monero:refund": "node --test --import tsx apps/web/src/lib/monero/refundPolicy.test.ts",
    "test:social": "node --test --import tsx apps/web/src/lib/social/store.test.ts",
    "test:inbox": "node --test --import tsx apps/web/src/lib/inbox/dm.test.ts",
    "test:chat": "node --test --import tsx apps/web/src/lib/chatCommands.test.ts",
    "test:profile": "node --test --import tsx apps/web/src/lib/profile.test.ts",
    "test:mobile:permissions": "node --test --import tsx apps/web/src/lib/mediaPermissions.test.ts",
    "test:whep": "node --test --import tsx apps/web/src/lib/whep-fallback.test.ts",
    "test": "npm run test:protocol && npm run test:monero && npm run test:monero:refund && npm run test:social && npm run test:inbox && npm run test:chat && npm run test:profile && npm run test:mobile:permissions && npm run test:whep",
    "check": "npm run typecheck && npm test && npm run lint && npm run build",
    "infra:up": "docker compose -f infra/stream/docker-compose.yml up -d",
    "infra:up:test": "docker compose -f infra/stream/docker-compose.yml --profile test up -d",
    "infra:ps": "docker compose -f infra/stream/docker-compose.yml ps",
    "infra:down": "docker compose -f infra/stream/docker-compose.yml down",
    "mediamtx:gen": "node scripts/gen-mediamtx-config.mjs",
    "stack:up": "npm run mediamtx:gen && DSTREAM_MEDIAMTX_CONFIG=/tmp/dstream-mediamtx.yml docker compose up -d --build",
    "stack:up:real-wallet": "npm run mediamtx:gen && DSTREAM_MEDIAMTX_CONFIG=/tmp/dstream-mediamtx.yml docker compose -f docker-compose.yml -f docker-compose.real-wallet.yml up -d --build",
    "stack:down": "docker compose down",
    "stack:down:real-wallet": "docker compose -f docker-compose.yml -f docker-compose.real-wallet.yml down",
    "smoke:e2e": "bash scripts/smoke-e2e.sh",
    "smoke:escrow": "node scripts/smoke-escrow.mjs",
    "smoke:escrow:v3": "node scripts/smoke-escrow-v3.mjs",
    "smoke:integrity": "bash scripts/smoke-integrity.sh",
    "smoke:wallet": "node scripts/smoke-wallet-interop.mjs",
    "smoke:wallet:matrix": "node scripts/smoke-wallet-matrix.mjs",
    "smoke:wallet:cake": "WALLET_MATRIX=cake node scripts/smoke-wallet-matrix.mjs",
    "smoke:wallet:feather": "WALLET_MATRIX=feather node scripts/smoke-wallet-matrix.mjs",
    "smoke:wallet:cli": "WALLET_MATRIX=cli node scripts/smoke-wallet-matrix.mjs",
    "smoke:wallet:cap": "node scripts/smoke-wallet-capabilities.mjs",
    "smoke:wallet:real": "node scripts/smoke-wallet-real.mjs",
    "harden:check": "node scripts/harden-check.mjs",
    "harden:deploy": "HARDEN_MODE=deploy node scripts/harden-check.mjs",
    "check:mobile-shell": "node scripts/check-mobile-shell.mjs",
    "check:mobile:golden": "node scripts/check-mobile-ui-golden.mjs",
    "check:mobile:golden:update": "node scripts/check-mobile-ui-golden.mjs --update",
    "check:mobile": "npm run check:mobile-shell && npm run check:mobile:golden",
    "smoke:external:readiness": "node scripts/smoke-external-readiness.mjs",
    "mobile:sync": "npm --workspace mobile run sync",
    "mobile:open:ios": "npm --workspace mobile run open:ios",
    "mobile:open:android": "npm --workspace mobile run open:android",
    "smoke:e2e:firefox": "npm run mediamtx:gen && DSTREAM_MEDIAMTX_CONFIG=/tmp/dstream-mediamtx.yml docker compose up -d --no-deps --force-recreate mediamtx && DSTREAM_SMOKE_BROWSER_APP=Firefox bash scripts/smoke-e2e.sh",
    "smoke:integrity:firefox": "npm run mediamtx:gen && DSTREAM_MEDIAMTX_CONFIG=/tmp/dstream-mediamtx.yml docker compose up -d --no-deps --force-recreate mediamtx && DSTREAM_SMOKE_BROWSER_APP=Firefox bash scripts/smoke-integrity.sh"
  },
  "devDependencies": {
    "turbo": "^1.10.0",
    "tsx": "^4.20.5",
    "typescript": "^5.9.3"
  }
}
