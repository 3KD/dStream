# Public (bundled into the web client)
# For production deployment, start from `.env.production.example`.

# Comma-separated list or JSON array of relay URLs.
# Dev default: ws://localhost:8081
NEXT_PUBLIC_NOSTR_RELAYS=ws://localhost:8081

# Base URL for HLS used in the announce "streaming" hint (kind 30311).
# Example: https://origin.example.com/hls
# If unset, the app uses same-origin /api/hls/... (dev proxy).
NEXT_PUBLIC_HLS_ORIGIN=

# WebRTC ICE servers used for WHIP publish (and some P2P paths).
# Comma-separated list or JSON array of URLs.
# Example: stun:stun.l.google.com:19302,turn:turn.example.com:3478?transport=udp
NEXT_PUBLIC_WEBRTC_ICE_SERVERS=

# NIP-05 policy:
# - off: disable NIP-05 checks in UI
# - badge: show verification badge only (default)
# - require: require verified NIP-05 for moderation/role controls
NEXT_PUBLIC_NIP05_POLICY=badge

# Optional platform support donation address shown on /donate.
NEXT_PUBLIC_SUPPORT_XMR_ADDRESS=49zL3oidgJbD6DeMheen873myfW1Jkp2tHiQJWXD7L64gjMjQ2pjFmjeksziP3CGKA1rfeLMCtgEqbUWBmhzL9YGP6X5w42

# Server-only (Next.js reverse proxy destinations for /api/whip and /api/hls)
# These control where the web app proxies WHIP/HLS when using same-origin /api/*.
# In local dev, defaults match `infra/stream` port mappings.
DSTREAM_WHIP_PROXY_ORIGIN=http://localhost:8889
# WHEP proxy origin (WebRTC playback). If unset, falls back to `DSTREAM_WHIP_PROXY_ORIGIN`.
DSTREAM_WHEP_PROXY_ORIGIN=http://localhost:8889
DSTREAM_HLS_PROXY_ORIGIN=http://localhost:8888
# Enables /dev routes and dev helper APIs.
# Keep this `0` in production.
DSTREAM_DEVTOOLS=1

# Monero (verified tips, server-only)
#
# Wallet RPC origin (Monero wallet RPC exposes JSON-RPC at /json_rpc).
# - If running the web app on the host: http://localhost:18083
# - If running via root docker-compose.yml: http://xmr-mock:18083 (default)
# - If running your own wallet RPC container/service: http://<host>:<port>
DSTREAM_XMR_WALLET_RPC_ORIGIN=

# Optional Basic auth for wallet RPC.
DSTREAM_XMR_WALLET_RPC_USER=
DSTREAM_XMR_WALLET_RPC_PASS=

# Wallet filename/password used by scripts/xmr-wallet-init.mjs and real-wallet stack flows.
# Keep wallet-file password empty for local regtest unless you explicitly need one.
DSTREAM_XMR_WALLET_FILE_PASS=
DSTREAM_XMR_RECEIVER_WALLET_NAME=receiver_wallet
DSTREAM_XMR_SENDER_WALLET_NAME=sender_wallet

# Account index used for allocating stream-scoped subaddresses.
DSTREAM_XMR_ACCOUNT_INDEX=0

# Confirmations required to treat a transfer as confirmed.
DSTREAM_XMR_CONFIRMATIONS_REQUIRED=10

# Minimum served bytes required in signed receipts for stake refund eligibility.
# 0 disables the threshold check.
DSTREAM_XMR_REFUND_MIN_SERVED_BYTES=0

# Minimum age (seconds) after latest stake transfer before broadcaster slash is allowed.
DSTREAM_XMR_STAKE_SLASH_MIN_AGE_SEC=3600

# Escrow-v3 multisig session TTL in seconds.
DSTREAM_XMR_ESCROW_SESSION_TTL_SEC=3600

# HMAC secret for tip/stake session tokens.
# Required in production. Use at least 32 random characters.
DSTREAM_XMR_SESSION_SECRET=

# Origin ladder transcoding (server-side, docker compose)
#
# Source HLS base read by the ladder transcoder service.
TRANSCODER_SOURCE_HLS_BASE=http://mediamtx:8880

# Output RTMP base used to publish derived renditions back into MediaMTX.
TRANSCODER_OUTPUT_RTMP_BASE=rtmp://mediamtx:1935

# Profiles: id:width:height:videoBitrate:audioBitrate (comma-separated).
TRANSCODER_PROFILES=720p:1280:720:2500k:128k,480p:854:480:1200k:96k,360p:640:360:700k:64k

# Poll interval and source staleness windows (milliseconds).
TRANSCODER_POLL_MS=2500
TRANSCODER_STALE_MS=12000

# Safety cap for concurrent source streams being transcoded.
TRANSCODER_MAX_STREAMS=24

# Real-wallet docker stack host ports (docker-compose.real-wallet.yml)
DSTREAM_MONEROD_RPC_PORT=28081
DSTREAM_XMR_WALLET_RPC_RECEIVER_PORT=28083
DSTREAM_XMR_WALLET_RPC_SENDER_PORT=28084
