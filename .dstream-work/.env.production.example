# Production deployment template.
# Copy to `.env.production` and replace all example values.

# Public (bundled into the web client)
NEXT_PUBLIC_NOSTR_RELAYS=wss://relay.damus.io,wss://nos.lol
NEXT_PUBLIC_HLS_ORIGIN=https://stream.example.com
NEXT_PUBLIC_WEBRTC_ICE_SERVERS=[{"urls":"stun:stun.cloudflare.com:3478"},{"urls":["turn:turn.example.com:3478?transport=udp","turn:turn.example.com:3478?transport=tcp"],"username":"dstream-turn","credential":"replace-turn-password"}]
NEXT_PUBLIC_NIP05_POLICY=badge
NEXT_PUBLIC_SUPPORT_XMR_ADDRESS=49zL3oidgJbD6DeMheen873myfW1Jkp2tHiQJWXD7L64gjMjQ2pjFmjeksziP3CGKA1rfeLMCtgEqbUWBmhzL9YGP6X5w42

# TURN service settings (docker-compose TURN service)
TURN_REALM=dstream.stream
TURN_USERNAME=dstream-turn
TURN_PASSWORD=replace-turn-password
TURN_EXTERNAL_IP=203.0.113.10
TURN_PORT=3478
TURN_MIN_PORT=49160
TURN_MAX_PORT=49200

# Server-only reverse proxy origins
DSTREAM_WHIP_PROXY_ORIGIN=https://origin.example.com
DSTREAM_WHEP_PROXY_ORIGIN=https://origin.example.com
DSTREAM_HLS_PROXY_ORIGIN=https://origin.example.com

# Disable dev tooling endpoints in production.
DSTREAM_DEVTOOLS=0

# Monero wallet RPC (optional; keep blank to disable verified wallet flows)
DSTREAM_XMR_WALLET_RPC_ORIGIN=
DSTREAM_XMR_WALLET_RPC_USER=
DSTREAM_XMR_WALLET_RPC_PASS=

DSTREAM_XMR_WALLET_FILE_PASS=
DSTREAM_XMR_RECEIVER_WALLET_NAME=receiver_wallet
DSTREAM_XMR_SENDER_WALLET_NAME=sender_wallet
DSTREAM_XMR_ACCOUNT_INDEX=0
DSTREAM_XMR_CONFIRMATIONS_REQUIRED=10
DSTREAM_XMR_REFUND_MIN_SERVED_BYTES=0
DSTREAM_XMR_STAKE_SLASH_MIN_AGE_SEC=3600
DSTREAM_XMR_ESCROW_SESSION_TTL_SEC=3600

# Required in production: minimum 32 random chars.
DSTREAM_XMR_SESSION_SECRET=replace-with-a-long-random-secret-before-production-deploy-0123456789

# Origin ladder transcoding
TRANSCODER_SOURCE_HLS_BASE=http://mediamtx:8880
TRANSCODER_OUTPUT_RTMP_BASE=rtmp://mediamtx:1935
TRANSCODER_PROFILES=720p:1280:720:2500k:128k,480p:854:480:1200k:96k,360p:640:360:700k:64k
TRANSCODER_POLL_MS=2500
TRANSCODER_STALE_MS=12000
TRANSCODER_MAX_STREAMS=24
